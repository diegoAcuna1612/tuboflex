---
import { Image } from "astro:assets";

interface Props {
  diameter: string;
  usage: string;
  lengthRange: string;
  capacityRange: string;
  weightRange: string;
  imageSrc: ImageMetadata | string;
  material?: string;
  internalCoating?: string;
  externalCoating?: string;
  printing?: string;
  capType?: string;
  hermeticity?: string;
}

const {
  diameter,
  usage,
  lengthRange,
  capacityRange,
  weightRange,
  imageSrc,
  material = "Aluminio puro 99.7%",
  internalCoating = "Barniz sanitario",
  externalCoating = "Esmalte base",
  printing = "Offset",
  capType = "Cónica M9-1",
  hermeticity = "Anillo de Látex",
} = Astro.props;
---

<article class="product-card group">
  <div class="card-header">
    <div class="badge">Ø {diameter} mm</div>

    <div class="image-wrapper">
      <div class="glow"></div>
      <img
        src={typeof imageSrc === "string" ? imageSrc : imageSrc.src}
        alt={`Tubo de aluminio ${diameter}mm`}
        class="product-img"
        width="200"
        height="200"
      />
    </div>

    <h3 class="title">Tubo Ø {diameter}</h3>
    <p class="subtitle">Uso: {usage}</p>
  </div>

  <div class="specs-body">
    <table class="specs-table">
      <tbody>
        <tr>
          <th>Longitud:</th>
          <td>{lengthRange}</td>
        </tr>
        <tr>
          <th>Capacidad:</th>
          <td>{capacityRange}</td>
        </tr>
        <tr>
          <th>Peso de llenado:</th>
          <td>{weightRange}</td>
        </tr>
        <tr>
          <th>Material:</th>
          <td>{material}</td>
        </tr>
        <tr>
          <th>Recubrimiento Interior:</th>
          <td>{internalCoating}</td>
        </tr>
        <tr>
          <th>Recubrimiento Exterior:</th>
          <td>{externalCoating}</td>
        </tr>
        <tr>
          <th>Impresión:</th>
          <td>{printing}</td>
        </tr>
        <tr>
          <th>Tapa:</th>
          <td>{capType}</td>
        </tr>
        <tr>
          <th>Hermeticidad:</th>
          <td>{hermeticity}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="card-footer">
    <a href="/contacto" class="btn-quote">Cotizar Ø {diameter}</a>
  </div>
</article>

<style>
  .product-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
  }

  .product-card:hover {
    border-color: #005daa;
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 93, 170, 0.15);
  }

  .card-header {
    padding: 1.5rem;
    text-align: center;
    background: linear-gradient(to bottom, #fff, #f8fafc);
    border-bottom: 1px solid #f1f5f9;
  }

  .badge {
    display: inline-block;
    background: #003d70;
    color: white;
    font-weight: 700;
    padding: 4px 12px;
    border-radius: 50px;
    font-size: 0.85rem;
    margin-bottom: 1rem;
  }

  .image-wrapper {
    position: relative;
    height: 200px; /* Altura fija para la imagen */
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
  }

  .glow {
    position: absolute;
    width: 100px;
    height: 100px;
    background: radial-gradient(
      circle,
      rgba(0, 93, 170, 0.2) 0%,
      transparent 70%
    );
    border-radius: 50%;
  }

  .product-img {
    position: relative;
    z-index: 10;
    height: auto;
    max-height: 100%;
    width: auto;
    max-width: 100%;
    filter: drop-shadow(0 10px 10px rgba(0, 0, 0, 0.1));
    transition: transform 0.3s;
  }

  .product-card:hover .product-img {
    transform: scale(1.05) rotate(-2deg);
  }

  .title {
    font-size: 1.5rem;
    font-weight: 800;
    color: #1e293b;
    margin-bottom: 0.2rem;
  }

  .subtitle {
    font-size: 0.9rem;
    color: #64748b;
    height: 40px; /* Altura fija para alinear tarjetas */
  }

  .specs-body {
    padding: 1.5rem;
    flex-grow: 1;
  }

  .specs-table {
    width: 100%;
    font-size: 0.85rem;
  }

  .specs-table th {
    text-align: left;
    color: #64748b;
    font-weight: 600;
    padding: 6px 0;
    width: 40%;
  }

  .specs-table td {
    text-align: right;
    color: #334155;
    font-weight: 600;
    padding: 6px 0;
    border-bottom: 1px solid #f1f5f9;
  }

  .specs-table tr:last-child td {
    border-bottom: none;
  }

  .card-footer {
    padding: 1.5rem;
    background: #f8fafc;
    border-top: 1px solid #f1f5f9;
  }

  .btn-quote {
    display: block;
    text-align: center;
    background: #005daa;
    color: white;
    font-weight: 700;
    padding: 12px;
    border-radius: 8px;
    text-decoration: none;
    transition: background 0.2s;
  }

  .btn-quote:hover {
    background: #003d70;
  }
</style>
